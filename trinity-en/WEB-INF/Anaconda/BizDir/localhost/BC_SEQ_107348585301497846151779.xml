<?xml version="1.0" encoding="utf-8"?><xml PATH="/home/java/trinity/trinity-en/WEB-INF/Anaconda/BizDir/localhost/BC_SEQ_107348585301497846151779.xml" USER="null" id="BC_SEQ_107348585301497846151779"><BC_SEQ_107348585301497846151779 AnacondaRule="null" BIZ_COLLECTION_CACHE_TIME="0" BIZ_COLLECTION_COUNT="1" BIZ_COLLECTION_KOR_NAME="로그인" COLLECTION_INTERCEPTER="" KIND="COLLECTION" aop_intercepter="" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;null&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;null&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" business_rule="null" id="BC_SEQ_107348585301497846151779" referenceKey="null"><login DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="select * ,  UUID() as token , '0' as MEMBER_LEVEL&lt;BR&gt;from Member where email = ? and Password = SHA2(?,256) and Accept = 'Y'&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;BusinessCollection bc = (BusinessCollection)result.getReturnObject(&quot;login&quot;);&lt;BR&gt;if(bc != null &amp;&amp; bc.size() &gt; 0) {&lt;BR&gt;   request.setFieldValue(&quot;Account&quot;,bc.getBusinessData(0).getFieldValue(&quot;Account&quot;));&lt;BR&gt;   result.addReturnObject(&quot;SPPCLogin&quot;,bc);&lt;BR&gt;}" aop_point_method="&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="email" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="password" SEQ="2" TYPE="STRING" VALUE=""/>
</login><updateSession DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="insert into CurrentSession(Token,Account,LoginTime)&lt;BR&gt;Values (?,?,NOW())&lt;BR&gt;on duplicate key UPDATE&lt;BR&gt;Token = ?, LoginTime = Now() &lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;import java.lang.*;&lt;BR&gt;import com.stuko.anaconda.business.*;&lt;BR&gt;Object object = result.getReturnObject(&quot;login&quot;);&lt;BR&gt;if(object != null){&lt;BR&gt;   BusinessCollection bc = (BusinessCollection)object;&lt;BR&gt;   if(bc.size() &gt; 0){&lt;BR&gt;      request.setFieldValue(&quot;Account&quot;, bc.getBusinessData(0).getFieldValue(&quot;Account&quot;));&lt;BR&gt;      request.setFieldValue(&quot;token&quot; , bc.getBusinessData(0).getFieldValue(&quot;token&quot;));&lt;BR&gt;   }&lt;BR&gt;}else{&lt;BR&gt;   This.doProcessSkip(true);&lt;BR&gt;}&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="token" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="Account" SEQ="2" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="refToken" SEQ="3" TYPE="REFERENCE" VALUE="token"><![CDATA[token]]></FIELD>
</updateSession><AcceptYN DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="Select Accept , datediff(now(),str_to_date(EnterDateTime,'%Y%m%d%H%i%s')) as Gap From Member Where Email = ? And Password = SHA2(?,256)&lt;BR&gt;" TYPE="SQL" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="email" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="password" SEQ="2" TYPE="STRING" VALUE=""/>
</AcceptYN><DUNASSO DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="UPDATE ChannelMember&lt;BR&gt;Set    Account = ?&lt;BR&gt;Where  ChannelId = ?&lt;BR&gt;And    Vendor = ?" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.ConditionalBusinessIntercepter" aop_point_method="request.getFieldValue(&quot;session.ChannelId&quot;) != null &amp;&amp; request.getFieldValue(&quot;session.Vendor&quot;) != null  ">
<FIELD KIND="ITEM" LENGTH="0" NAME="Account" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="session.ChannelId" SEQ="2" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="session.Vendor" SEQ="3" TYPE="STRING" VALUE=""/>
</DUNASSO><DUNA-CHANNEL DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="insert into Channel(ChannelId,Vendor,BotName,CSeq) &lt;BR&gt;Values (?,?,?,?) on duplicate key UPDATE Vendor = ? , BotName = ?" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.ConditionalBusinessIntercepter" aop_point_method="request.getFieldValue(&quot;session.ChannelId&quot;) != null &amp;&amp; request.getFieldValue(&quot;session.Vendor&quot;) != null  &amp;&amp;&lt;BR&gt;request.getFieldValue(&quot;session.BotName&quot;) != null">
<FIELD KIND="ITEM" LENGTH="0" NAME="session.ChannelId" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="session.Vendor" SEQ="2" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="session.BotName" SEQ="3" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="CSeq" SEQ="4" TYPE="KEY" VALUE="C"><![CDATA[C]]></FIELD>
<FIELD KIND="ITEM" LENGTH="0" NAME="V" SEQ="5" TYPE="REFERENCE" VALUE="session.Vendor"><![CDATA[session.Vendor]]></FIELD>
<FIELD KIND="ITEM" LENGTH="0" NAME="B" SEQ="6" TYPE="REFERENCE" VALUE="session.BotName"><![CDATA[session.BotName]]></FIELD>
</DUNA-CHANNEL><setMyDBtoSession DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="select b.token as clientId, SecretKey as secretKey , a.total as max, 1 as min, a.*&lt;BR&gt;from  sp.ChatBotDB a,&lt;BR&gt;      sp.ChatBotToken b &lt;BR&gt;where  a.token = b.token&lt;BR&gt;and    b.Account = ?&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;BusinessCollection bc = (BusinessCollection)result.getReturnObject(&quot;setMyDBtoSession&quot;);&lt;BR&gt;if(bc != null &amp;&amp; bc.size() &gt; 0){&lt;BR&gt;   result.addReturnObject(&quot;jndi&quot;,bc.getBusinessData(0).getFieldValue(&quot;jndi&quot;));&lt;BR&gt;   result.addReturnObject(&quot;secretKey&quot;,bc.getBusinessData(0).getFieldValue(&quot;secretKey&quot;));&lt;BR&gt;   result.addReturnObject(&quot;clientId&quot;,bc.getBusinessData(0).getFieldValue(&quot;clientId&quot;));&lt;BR&gt;   result.addReturnObject(&quot;db&quot;,bc.getBusinessData(0).getFieldValue(&quot;db&quot;));&lt;BR&gt;}">
<FIELD KIND="ITEM" LENGTH="0" NAME="Account" SEQ="1" TYPE="STRING" VALUE=""/>
</setMyDBtoSession></BC_SEQ_107348585301497846151779></xml>