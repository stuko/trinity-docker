<?xml version="1.0" encoding="utf-8"?><xml PATH="/home/java/trinity/trinity-en/WEB-INF/Anaconda/BizDir/dev.bestmember.net/createOrUpdateRuleContextScript.xml" USER="null" id="createOrUpdateRuleContextScript"><createOrUpdateRuleContextScript AnacondaRule="null" BIZ_COLLECTION_CACHE_TIME="0" BIZ_COLLECTION_COUNT="1" BIZ_COLLECTION_KOR_NAME="룰 편집시, 룰 성공 전후 실행할 스크립트 저장" COLLECTION_INTERCEPTER="" KIND="COLLECTION" aop_intercepter="" aop_point_class="&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;&lt;BR&gt;" business_rule="null" id="createOrUpdateRuleContextScript" referenceKey="null"><checkCreateOrUpdate DATASOURCE="session.jndi" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="SELECT COUNT(*) AS CNT FROM RULE_CONTEXT_SCRIPT&lt;BR&gt;WHERE RULE_SEQ = ?" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="import com.stuko.anaconda.business.*;&lt;BR&gt;BusinessCollection bc = (BusinessCollection)result.getReturnObject(&quot;checkCreateOrUpdate&quot;);&lt;BR&gt;&lt;BR&gt;if(bc != null &amp;&amp; bc.size() &gt; 0){&lt;BR&gt;   if(!&quot;0&quot;.equals(bc.getBusinessData(0).getFieldValue(&quot;CNT&quot;))){&lt;BR&gt;       request.setFieldValue(&quot;RULE_UPDATE&quot;,&quot;true&quot;);&lt;BR&gt;       request.setFieldValue(&quot;RULE_CREATE&quot;,&quot;&quot;);&lt;BR&gt;  }else{&lt;BR&gt;       request.setFieldValue(&quot;RULE_UPDATE&quot;,&quot;&quot;);&lt;BR&gt;       request.setFieldValue(&quot;RULE_CREATE&quot;,&quot;true&quot;);&lt;BR&gt;  }&lt;BR&gt;}">
<FIELD KIND="ITEM" LENGTH="0" NAME="RULE_SEQ" SEQ="1" TYPE="INT" VALUE=""/>
</checkCreateOrUpdate><createRuleContextScript DATASOURCE="session.jndi" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="INSERT INTO RULE_CONTEXT_SCRIPT(RULE_SEQ, RULE_BEFORE_SCRIPT, RULE_AFTER_SCRIPT) VALUES(?,?,?)" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.ConditionalBusinessIntercepter" aop_point_method="com.stuko.anaconda.business.BusinessHelper.checkNull(request.getFieldValue(&quot;RULE_CREATE&quot;))">
<FIELD KIND="ITEM" LENGTH="0" NAME="RULE_SEQ" SEQ="1" TYPE="INT" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="RULE_BEFORE_SCRIPT" SEQ="2" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="RULE_AFTER_SCRIPT" SEQ="3" TYPE="STRING" VALUE=""/>
</createRuleContextScript><updateRuleContextScript DATASOURCE="session.jndi" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="UPDATE RULE_CONTEXT_SCRIPT&lt;BR&gt;SET RULE_BEFORE_SCRIPT = ? , RULE_AFTER_SCRIPT = ?&lt;BR&gt;WHERE RULE_SEQ = ?" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.ConditionalBusinessIntercepter" aop_point_method="com.stuko.anaconda.business.BusinessHelper.checkNull(request.getFieldValue(&quot;RULE_UPDATE&quot;))">
<FIELD KIND="ITEM" LENGTH="0" NAME="RULE_BEFORE_SCRIPT" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="RULE_AFTER_SCRIPT" SEQ="2" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="RULE_SEQ" SEQ="3" TYPE="INT" VALUE=""/>
</updateRuleContextScript></createOrUpdateRuleContextScript></xml>