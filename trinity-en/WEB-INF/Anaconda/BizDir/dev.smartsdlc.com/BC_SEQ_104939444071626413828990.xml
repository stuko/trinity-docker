<?xml version="1.0" encoding="utf-8"?><xml PATH="/home/java/trinity/trinity-en/WEB-INF/Anaconda/BizDir/dev.smartsdlc.com/BC_SEQ_104939444071626413828990.xml" USER="null" id="BC_SEQ_104939444071626413828990"><BC_SEQ_104939444071626413828990 AnacondaRule="null" BIZ_COLLECTION_CACHE_TIME="0" BIZ_COLLECTION_COUNT="1" BIZ_COLLECTION_KOR_NAME="쳇바타-소셜프로젝트-스케줄호출" COLLECTION_INTERCEPTER="" KIND="COLLECTION" aop_intercepter="" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" business_rule="null" id="BC_SEQ_104939444071626413828990" referenceKey="null"><findDB DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="Select db&lt;BR&gt;From  ChatBotDB&lt;BR&gt;Where token = ?" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="import com.stuko.anaconda.business.*;&lt;BR&gt;BusinessCollection bc = (BusinessCollection)result.getReturnObject(&quot;findDB&quot;);&lt;BR&gt;if(bc != null &amp;&amp; bc.size() &gt; 0) {&lt;BR&gt;  request.setFieldValue(&quot;DB&quot;, &quot;java:comp/env/jdbc/&quot; + bc.getBusinessData(0).getFieldValue(&quot;db&quot;));&lt;BR&gt;}else{&lt;BR&gt;  This.doProcessExit(true);&lt;BR&gt;}">
<FIELD KIND="ITEM" LENGTH="0" NAME="clientId" SEQ="1" TYPE="STRING" VALUE=""/>
</findDB><schedule DATASOURCE="request.DB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="Select *&lt;BR&gt;From (&lt;BR&gt; SELECT b.PMCode , 'UP' as WBSMethod, (Select X.ProjectName From Project X , ProjectManagement Y Where X.ProjectCode = Y.ProjectCode And Y.PMCode = b.PMCode) as WBSProjectName&lt;BR&gt;       ,c.PhaseName as WBSPhaseName&lt;BR&gt;       ,d.ActivityName as WBSActivityName&lt;BR&gt;           ,DATE_FORMAT(a.StartDateTime,'%Y년%m월%d일') as WBSStart&lt;BR&gt;       ,DATE_FORMAT(a.EndDateTime,'%Y년%m월%d일') as WBSEnd&lt;BR&gt;       ,if(a.StartDateTime &gt; CURDATE() ,'미도래',if(a.EndDateTime &lt; CURDATE() ,'지연','도래')) as WBSStatus2&lt;BR&gt;       ,if(a.Status = 'Y','완료',if(a.Progress &gt; 0 ,'진행중','시작전')) as WBSStatus&lt;BR&gt;       ,concat(TIMESTAMPDIFF(day, a.StartDateTime , a.EndDateTime),'') as WBSDuration&lt;BR&gt;       ,concat(TIMESTAMPDIFF(day, a.StartDateTime , now()),'') as WBSDelay&lt;BR&gt;       ,concat(TIMESTAMPDIFF(day, now(), a.EndDateTime),'') as WBSRemain &lt;BR&gt; FROM   Schedule a, ProjectManagement b, ProjectPhase c, ProjectActivity d&lt;BR&gt; WHERE  a.PMActivityCode = d.ActivityCode&lt;BR&gt; AND    a.PMCode = d.PMCode&lt;BR&gt; AND    d.PMCode = b.PMCode&lt;BR&gt; AND    d.PhaseCode = c.PhaseCode&lt;BR&gt; AND ( TIMESTAMPDIFF(day, a.StartDateTime , now()) &gt; 0 OR TIMESTAMPDIFF(day, now(), a.EndDateTime) &lt; 0 )&lt;BR&gt; Union All&lt;BR&gt; SELECT    A.PMCode, 'SCRUM' as WBSMethod, (Select X.ProjectName From Project X , ProjectManagement Y Where X.ProjectCode = Y.ProjectCode And Y.PMCode = A.PMCode) as WBSProjectName&lt;BR&gt;          ,A.SP_NAME as WBSPhaseName&lt;BR&gt;          ,(SELECT BL_TEXT FROM BACK_LOG WHERE BL_KEY = B.BL_KEY) as WBSActivityName&lt;BR&gt;          ,DATE_FORMAT(STR_TO_DATE(A.START_DATE,'%Y%m%d'),'%Y년%m월%d일') as WBSStart&lt;BR&gt;          ,DATE_FORMAT(STR_TO_DATE(A.END_DATE,'%Y%m%d'),'%Y년%m월%d일') as WBSEnd&lt;BR&gt;          ,if(STR_TO_DATE(A.START_DATE,'%Y%m%d') &gt; CURDATE() ,'미도래',if(STR_TO_DATE(A.END_DATE,'%Y%m%d') &lt; CURDATE() ,'지연','도래')) as WBSStatus2&lt;BR&gt;          ,if(B.Progress = 100 ,'완료',if(B.Progress &gt; 0 ,'진행중','시작전')) as WBSStatus&lt;BR&gt;          ,concat(TIMESTAMPDIFF(day, STR_TO_DATE(A.START_DATE,'%Y%m%d')&lt;BR&gt;                                   , STR_TO_DATE(A.END_DATE,'%Y%m%d')&lt;BR&gt;                                ),'') as WBSDuration&lt;BR&gt;          ,concat(TIMESTAMPDIFF(day, STR_TO_DATE(A.START_DATE,'%Y%m%d') , now()),'') as WBSDelay&lt;BR&gt;          ,concat(TIMESTAMPDIFF(day, now(), STR_TO_DATE(A.END_DATE,'%Y%m%d')),'') as WBSRemain &lt;BR&gt; FROM     SPRINT A &lt;BR&gt;        , SPRINT_BACK_LOG B  &lt;BR&gt; WHERE     A.SP_KEY = B.SP_KEY&lt;BR&gt; AND ( TIMESTAMPDIFF(day, STR_TO_DATE(A.START_DATE,'%Y%m%d') , now()) &gt; 0 OR TIMESTAMPDIFF(day, now(), STR_TO_DATE(A.END_DATE,'%Y%m%d')) &lt; 0 )&lt;BR&gt;   ) U&lt;BR&gt;Where ((Cast(WBSRemain As Integer) &gt; 0 ) Or (Cast(WBSDelay As Integer) &gt; 0 ))&lt;BR&gt;And WeekDay(NOW()) NOT IN (0, 6)&lt;BR&gt;Order By Rand()&lt;BR&gt;Limit 0,3" TYPE="SQL">
</schedule><issue DATASOURCE="request.DB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="Select *&lt;BR&gt;From   Issue&lt;BR&gt;Where  IssueStatus NOT IN ('C')&lt;BR&gt;And MINUTE(NOW()) IN (30, 40)&lt;BR&gt;And WeekDay(NOW()) NOT IN (0, 6)&lt;BR&gt;And Hour(NOW()) IN (9, 10,14,15)&lt;BR&gt;Order By Rand()&lt;BR&gt;Limit 0,3&lt;BR&gt;" TYPE="SQL">
</issue></BC_SEQ_104939444071626413828990></xml>