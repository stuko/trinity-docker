<?xml version="1.0" encoding="utf-8"?><xml PATH="/usr/local/tomcat/webapps/trinity/WEB-INF/Anaconda/BizDir/localhost/BC_SEQ_104735124191498002050347.xml" USER="null" id="BC_SEQ_104735124191498002050347"><BC_SEQ_104735124191498002050347 AnacondaRule="null" BIZ_COLLECTION_CACHE_TIME="0" BIZ_COLLECTION_COUNT="1" BIZ_COLLECTION_KOR_NAME="챗봇회원가입" COLLECTION_INTERCEPTER="" KIND="COLLECTION" aop_intercepter="" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;null&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;null&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" business_rule="null" id="BC_SEQ_104735124191498002050347" referenceKey="null"><checkMember DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="SELECT count(*) AS MemberCount&lt;BR&gt;From   Member&lt;BR&gt;Where  Account = ?&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="&lt;BR&gt;import com.stuko.anaconda.XmlConfig.*;&lt;BR&gt;import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;BusinessCollection bc = (BusinessCollection)result.getReturnObject(&quot;checkMember&quot;);&lt;BR&gt;request.setFieldValue(&quot;MemberCount&quot;,bc.getBusinessData(0).getFieldValue(&quot;MemberCount&quot;));&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;null&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="Account" SEQ="1" TYPE="STRING" VALUE=""/>
</checkMember><createMember DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="Insert into Member(Account,ChannelId,ChannelUserId, role , EnterDateTime, UpdateDateTime,MemberStatus)&lt;BR&gt;Values(?,?,?,'member' ,date_format(now(), '%Y%m%d%h%i%s'),date_format(now(), '%Y%m%d%h%i%s') ,'C')&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;null&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;&lt;BR&gt;import com.stuko.anaconda.XmlConfig.*;&lt;BR&gt;import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;if(!request.getFieldValue(&quot;MemberCount&quot;).equals(&quot;0&quot;)){&lt;BR&gt;   This.doProcessSkip(true);&lt;BR&gt;}else{&lt;BR&gt;   if(!BusinessHelper.checkNull(request.getFieldValue(&quot;Account&quot;))){&lt;BR&gt;      request.setFieldValue(&quot;Account&quot;,AutoSeq.genKey(&quot;A&quot;));&lt;BR&gt;   }&lt;BR&gt;}&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="Account" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="channelId" SEQ="2" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="user" SEQ="3" TYPE="STRING" VALUE=""/>
</createMember><checkChannel DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="SELECT count(*) AS ChannelCount , TeamCode&lt;BR&gt;From   Channel&lt;BR&gt;Where  ChannelId = ?&lt;BR&gt;AND    Vendor = ?&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="&lt;BR&gt;import com.stuko.anaconda.XmlConfig.*;&lt;BR&gt;import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;BusinessCollection bc = (BusinessCollection)result.getReturnObject(&quot;checkChannel&quot;);&lt;BR&gt;request.setFieldValue(&quot;ChannelCount&quot;,bc.getBusinessData(0).getFieldValue(&quot;ChannelCount&quot;));&lt;BR&gt;request.setFieldValue(&quot;TeamCode&quot;,bc.getBusinessData(0).getFieldValue(&quot;TeamCode&quot;));&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;null&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="channelId" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="벤더" SEQ="2" TYPE="STRING" VALUE=""/>
</checkChannel><createChannel DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="Insert into Channel(ChannelId,TeamCode, ChannelGubun, BotName, Vendor)&lt;BR&gt;Values(?,?,'G',?,?)&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;null&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="import com.stuko.anaconda.XmlConfig.*;&lt;BR&gt;import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;if(!request.getFieldValue(&quot;ChannelCount&quot;).equals(&quot;0&quot;)) This.doProcessSkip(true);&lt;BR&gt;else{&lt;BR&gt;   request.setFieldValue(&quot;TeamCode&quot;,AutoSeq.genKey(&quot;T&quot;));&lt;BR&gt;}&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="channelId" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="TeamCode" SEQ="2" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="봇이름" SEQ="3" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="벤더" SEQ="4" TYPE="STRING" VALUE=""/>
</createChannel><checkTeam DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="SELECT count(*) AS TeamCount&lt;BR&gt;From   Team a,&lt;BR&gt;       Channel  b,&lt;BR&gt;       Member   c&lt;BR&gt;Where  c.Account = ?&lt;BR&gt;And    c.ChannelId = ?&lt;BR&gt;And    c.ChannelId = b.ChannelId&lt;BR&gt;And    b.BotName = ?&lt;BR&gt;And    b.Vendor = ?&lt;BR&gt;And    b.TeamCode = a.TeamCode&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="import com.stuko.anaconda.XmlConfig.*;&lt;BR&gt;import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;BusinessCollection bc = (BusinessCollection)result.getReturnObject(&quot;checkTeam&quot;);&lt;BR&gt;request.setFieldValue(&quot;TeamCount&quot;,bc.getBusinessData(0).getFieldValue(&quot;TeamCount&quot;));&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;null&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="Account" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="channelId" SEQ="2" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="봇이름" SEQ="3" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="벤더" SEQ="4" TYPE="STRING" VALUE=""/>
</checkTeam><createTeam DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="Insert into Team(Account, TeamCode , TeamName , TeamCreateDateTime)&lt;BR&gt;Values(?,?,?,date_format(now(), '%Y%m%d%h%i%s'))&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;null&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="import com.stuko.anaconda.XmlConfig.*;&lt;BR&gt;import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;if(!request.getFieldValue(&quot;TeamCount&quot;).equals(&quot;0&quot;)) This.doProcessSkip(true);&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="Account" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="TeamCode" SEQ="2" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="최초팀이름" SEQ="3" TYPE="STRING" VALUE=""/>
</createTeam><checkTeamMember DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="SELECT count(*) AS TeamMemberCount&lt;BR&gt;From TeamMember&lt;BR&gt;Where Account = ?&lt;BR&gt;And   TeamCode = ?&lt;BR&gt;&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="import com.stuko.anaconda.XmlConfig.*;&lt;BR&gt;import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;BusinessCollection bc = (BusinessCollection)result.getReturnObject(&quot;checkTeamMember&quot;);&lt;BR&gt;request.setFieldValue(&quot;TeamMemberCount&quot;,bc.getBusinessData(0).getFieldValue(&quot;TeamMemberCount&quot;));&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="Account" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="TeamCode" SEQ="2" TYPE="STRING" VALUE=""/>
</checkTeamMember><createTeamMember DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="Insert into TeamMember(Account, TeamCode,CreateDateTime)&lt;BR&gt;Values(?,?,date_format(now(), '%Y%m%d%h%i%s'))&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;null&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="import com.stuko.anaconda.XmlConfig.*;&lt;BR&gt;import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;if(!request.getFieldValue(&quot;TeamMemberCount&quot;).equals(&quot;0&quot;)) This.doProcessSkip(true);&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="Account" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="TeamCode" SEQ="2" TYPE="STRING" VALUE=""/>
</createTeamMember><createOrUpdateChannelConfig DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="&lt;BR&gt;&lt;BR&gt;INSERT INTO ChannelConfig (Vendor,ChannelId,ConfigName,ConfigValue) VALUES (?,?,?,?)&lt;BR&gt;ON DUPLICATE KEY UPDATE ConfigName = ?&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.ConditionalBusinessIntercepter" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="request.getFieldValue(&quot;토큰&quot;) != null&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="msgType" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="channelId" SEQ="2" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="configName" SEQ="3" TYPE="REFERENCE" VALUE="토큰"><![CDATA[토큰]]></FIELD>
<FIELD KIND="ITEM" LENGTH="0" NAME="token1" SEQ="4" TYPE="REFERENCE" VALUE="토큰"><![CDATA[토큰]]></FIELD>
<FIELD KIND="ITEM" LENGTH="0" NAME="token2" SEQ="5" TYPE="REFERENCE" VALUE="토큰"><![CDATA[토큰]]></FIELD>
</createOrUpdateChannelConfig><checkProject DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="SELECT count(*) as ProjectCount&lt;BR&gt;FROM   ProjectManagement a,&lt;BR&gt;       Channel b&lt;BR&gt;WHERE  a.TeamCode = b.TeamCode&lt;BR&gt;AND    b.ChannelId = ?&lt;BR&gt;" TYPE="SQL" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="channelId" SEQ="1" TYPE="STRING" VALUE=""/>
</checkProject><createProject DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="INSERT INTO Project ( ProjectCode, ProjectName, Account) VALUES( ?,concat(? ,' 에서 만든 프로젝트'),?) &lt;BR&gt;&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;BusinessCollection bc = (BusinessCollection)result.getReturnObject(&quot;checkProject&quot;);&lt;BR&gt;if(!bc.getBusinessData(0).getFieldValue(&quot;ProjectCount&quot;).equals(&quot;0&quot;)){&lt;BR&gt;   This.doProcessSkip(true);&lt;BR&gt;}&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="프로젝트코드" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="channelId" SEQ="2" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="Account" SEQ="3" TYPE="STRING" VALUE=""/>
</createProject><requestProject DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="&lt;BR&gt;INSERT INTO ProjectManagement(PMCode,ProjectCode,TeamCode)&lt;BR&gt;Values (?,?,?)&lt;BR&gt;" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;BusinessCollection bc = (BusinessCollection)result.getReturnObject(&quot;checkProject&quot;);&lt;BR&gt;if(!bc.getBusinessData(0).getFieldValue(&quot;ProjectCount&quot;).equals(&quot;0&quot;)){&lt;BR&gt;   This.doProcessSkip(true);&lt;BR&gt;}&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;">
<FIELD KIND="ITEM" LENGTH="0" NAME="프로젝트관리코드" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="프로젝트코드" SEQ="2" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="TeamCode" SEQ="3" TYPE="STRING" VALUE=""/>
</requestProject></BC_SEQ_104735124191498002050347></xml>