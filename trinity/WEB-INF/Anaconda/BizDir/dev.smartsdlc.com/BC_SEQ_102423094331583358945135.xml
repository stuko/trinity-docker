<?xml version="1.0" encoding="utf-8"?><xml PATH="/usr/local/tomcat/webapps/trinity/WEB-INF/Anaconda/BizDir/dev.smartsdlc.com/BC_SEQ_102423094331583358945135.xml" USER="null" id="BC_SEQ_102423094331583358945135"><BC_SEQ_102423094331583358945135 AnacondaRule="null" BIZ_COLLECTION_CACHE_TIME="0" BIZ_COLLECTION_COUNT="1" BIZ_COLLECTION_KOR_NAME="챗봇 API 인증 관리 -&gt;  콜백-토큰인증" COLLECTION_INTERCEPTER="" KIND="COLLECTION" aop_intercepter="" aop_point_class="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" aop_point_method="&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;" business_rule="null" id="BC_SEQ_102423094331583358945135" referenceKey="null"><checkAuthKey DATASOURCE="java:comp/env/jdbc/SPDB" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="SELECT Jndi , callback&lt;BR&gt;FROM    sp.ChatBotToken&lt;BR&gt;WHERE Token = ?&lt;BR&gt;AND       SecretKey = ?" TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;BusinessCollection bc = (BusinessCollection)result.getReturnObject(&quot;checkAuthKey&quot;);&lt;BR&gt;if(bc != null &amp;&amp; bc.size() &gt; 0){&lt;BR&gt;   String jndi = bc.getBusinessData(0).getFieldValue(&quot;Jndi&quot;);&lt;BR&gt;   String url = bc.getBusinessData(0).getFieldValue(&quot;callback&quot;);&lt;BR&gt;   if(jndi == null || &quot;&quot;.equals(jndi)) This.doProcessExit(true);&lt;BR&gt;   else{&lt;BR&gt;      request.setFieldValue(&quot;session.jndi&quot;,jndi);&lt;BR&gt;      request.setFieldValue(&quot;url&quot;,url);&lt;BR&gt;   }&lt;BR&gt;}else{&lt;BR&gt;   This.doProcessExit(true);&lt;BR&gt;}">
<FIELD KIND="ITEM" LENGTH="0" NAME="clientId" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="secretKey" SEQ="2" TYPE="STRING" VALUE=""/>
</checkAuthKey><checkTmpKey DATASOURCE="session.jndi" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="SELECT *&lt;BR&gt;FROM   TMP_AUTH_KEY&lt;BR&gt;WHERE  CHANNELID = ?&lt;BR&gt;AND    AUTH_KEY = ?&lt;BR&gt;AND    NOW() &gt; AUTH_EXP_DATE " TYPE="SQL" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="import com.stuko.anaconda.business.*;&lt;BR&gt;&lt;BR&gt;BusinessCollection bc = (BusinessCollection)result.getReturnObject(&quot;checkTmpKey&quot;);&lt;BR&gt;if(bc == null  &amp;&amp; bc.size() == 0 ) This.doProcessExit(true);">
<FIELD KIND="ITEM" LENGTH="0" NAME="channelId" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="AUTH_KEY" SEQ="2" TYPE="STRING" VALUE=""/>
</checkTmpKey><createToken DATASOURCE="session.jndi" KIND="DATA" OWNER="sa" REMOTE="false" SERVICE_NAME="INSERT INTO TOKEN(TOKEN_KEY, CHANNELID)&lt;BR&gt;VALUES(?,?);" TYPE="SQL">
<FIELD KIND="ITEM" LENGTH="0" NAME="TOKEN_KEY" SEQ="1" TYPE="KEY" VALUE="TK"><![CDATA[TK]]></FIELD>
<FIELD KIND="ITEM" LENGTH="0" NAME="channelId" SEQ="2" TYPE="STRING" VALUE=""/>
</createToken><setSession KIND="DATA" OWNER="sa" POJO_CLASS="com.stuko.trinity.redis.RedisUtil" REMOTE="false" SERVICE_NAME="setSession" TYPE="POJO" aop_intercepter="com.stuko.anaconda.intercepter.SimpleBusinessIntercepter" aop_point_class="result.setmOBJMAP(new HashMap());&lt;BR&gt;result.addReturnObject(&quot;TOKEN&quot;,request.getFieldValue(&quot;TOKEN_KEY&quot;));">
<FIELD KIND="ITEM" LENGTH="0" NAME="TOKEN_KEY" SEQ="1" TYPE="STRING" VALUE=""/>
<FIELD KIND="ITEM" LENGTH="0" NAME="channelId" SEQ="2" TYPE="STRING" VALUE=""/>
</setSession></BC_SEQ_102423094331583358945135></xml>